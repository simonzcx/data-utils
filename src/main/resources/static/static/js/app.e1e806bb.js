(function(e){function t(t){for(var a,i,s=t[0],r=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),l()}function l(){for(var e,t=0;t<o.length;t++){for(var l=o[t],a=!0,s=1;s<l.length;s++){var r=l[s];0!==n[r]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=l[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=a,i.d=function(e,t,l){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(l,a,function(t){return e[t]}.bind(null,a));return l},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=r;o.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"034f":function(e,t,l){"use strict";var a=l("6f44"),n=l.n(a);n.a},"56d7":function(e,t,l){"use strict";l.r(t);l("d9a3"),l("c9db"),l("de3e"),l("618d");var a=l("0261"),n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("el-row",[l("el-col",{attrs:{offset:6,span:3}},[l("el-button",{on:{click:e.initOptions}},[e._v("初始化")])],1),l("el-col",{attrs:{span:3}},[l("el-button",{on:{click:e.downloadSql}},[e._v("下载sql脚本")])],1),l("el-col",{attrs:{span:3}},[l("el-button",{on:{click:e.restore}},[e._v("恢复默认")])],1),l("el-col",{attrs:{span:3}},[l("el-button",{on:{click:e.runSqls}},[e._v("执行sql脚本")])],1)],1),l("el-divider"),l("el-row",[l("el-col",{attrs:{span:2,offset:6}},[l("span",[e._v("newTable：")])]),l("el-col",{attrs:{span:4}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.getFieldOptions("2.0",e.table2)}},model:{value:e.table2,callback:function(t){e.table2=t},expression:"table2"}},e._l(e.tableOptions2,(function(e){return l("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}})})),1)],1),l("el-col",{attrs:{span:2}},[l("span",[e._v("oldTable：")])]),l("el-col",{attrs:{span:4}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.getFieldOptions("1.0",e.table1)}},model:{value:e.table1,callback:function(t){e.table1=t},expression:"table1"}},e._l(e.tableOptions1,(function(e){return l("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}})})),1)],1)],1),l("el-divider"),l("div",{staticClass:"field-box"},e._l(e.field,(function(t,a){return l("el-row",{key:a,staticClass:"m-b"},[l("el-col",{attrs:{span:2,offset:6}},[l("span",[e._v("newField"+e._s(a)+"：")])]),l("el-col",{attrs:{span:4}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t["newField"],callback:function(l){e.$set(t,"newField",l)},expression:"item['newField']"}},e._l(e.fieldOptions2,(function(e){return l("el-option",{key:e.columnName,attrs:{label:e.columnName,value:e.columnName}})})),1)],1),l("el-col",{attrs:{span:2}},[l("span",[e._v("oldField"+e._s(a)+"：")])]),l("el-col",{attrs:{span:4}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t["oldField"],callback:function(l){e.$set(t,"oldField",l)},expression:"item['oldField']"}},e._l(e.fieldOptions1,(function(e){return l("el-option",{key:e.columnName,attrs:{label:e.columnName,value:e.columnName}})})),1)],1),l("el-col",{attrs:{span:2}},[e.field.length>1?l("el-button",{on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除当前行")]):e._e()],1),l("el-col",{attrs:{span:2}},[e.field.length-1===a?l("el-button",{on:{click:e.handleSetField}},[e._v("确定")]):e._e()],1)],1)})),1),l("el-divider"),l("el-row",[l("el-col",{attrs:{offset:6,span:2}},[l("span",[e._v("filterSql：")])]),l("el-col",{attrs:{span:10}},[l("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.filterVal,callback:function(t){e.filterVal=t},expression:"filterVal"}})],1),l("el-col",{attrs:{span:2}},[l("el-button",{on:{click:function(t){e.filterSql=e.filterVal}}},[e._v("确定")])],1)],1),l("el-divider"),l("el-row",[l("el-col",{attrs:{offset:6,span:2}},[l("span",[e._v("columnMap：")])]),l("el-col",{attrs:{span:10}},[l("el-input",{attrs:{type:"textarea",disabled:"",autosize:"",placeholder:"请输入内容"},model:{value:e.columnMap,callback:function(t){e.columnMap=t},expression:"columnMap"}})],1),l("el-col",{attrs:{span:2}},[l("el-button",{on:{click:e.record}},[e._v("记录")])],1)],1)],1)},o=[],i=(l("af82"),l("c1b0"),l("9a14"),{name:"App",data:function(){return{table1:"",table2:"",field:[{oldField:"",newField:""}],filterSql:"",filterVal:"",tableOptions1:[],tableOptions2:[],fieldOptions1:[],fieldOptions2:[]}},computed:{columnMap:function(){var e={newTable:this.table2,oldTable:this.table1},t={};return this.field.forEach((function(e){t[e.newField]=e.oldField})),e.columnMap=t,e.filterSql=this.filterSql,JSON.stringify(e)}},methods:{initOptions:function(){var e=this;this.$axios({method:"post",url:"/data/init"}).then((function(t){200===t.status&&e.$message({message:t.data.data,type:"200"==t.data.status?"success":"warning",duration:2e3})})).catch((function(e){console.log(e)}))},downloadSql:function(){window.location.href="/data/downloadSqlFile"},restore:function(){var e=this;this.$axios({method:"post",url:"/data/restore"}).then((function(t){200===t.status&&e.$message({message:t.data.data,type:"200"==t.data.status?"success":"warning",duration:2e3})})).catch((function(e){console.log(e)}))},record:function(){var e=this;this.$axios({method:"post",url:"/data/generateSql",data:JSON.parse(this.columnMap)}).then((function(t){200===t.status&&e.$message({message:t.data.data,type:"200"==t.data.status?"success":"warning",duration:2e3})})).catch((function(e){console.log(e)}))},runSqls:function(){var e=this;this.$axios({method:"post",url:"/data/dataMigration"}).then((function(t){200===t.status&&e.$message({message:t.data.data,type:"200"==t.data.status?"success":"warning",duration:2e3})})).catch((function(e){console.log(e)}))},handleDelete:function(e){this.field.splice(e,1)},handleSetField:function(){var e=this.field.length-1,t={};t["oldField"+e]="",t["newField"+e]="",this.field.push(t)},getTableOptions:function(e){var t="/slave1/findAllTableName";"2.0"===e&&(t="/slave2/findAllTableName");var l=this;this.$axios({method:"post",url:t}).then((function(t){200===t.status&&("2.0"===e?l.tableOptions2=t.data.data:l.tableOptions1=t.data.data)})).catch((function(e){console.log(e)}))},getFieldOptions:function(e,t){var l=this,a="/slave1/findTableStructure";"2.0"===e&&(a="/slave2/findTableStructure"),this.$axios({method:"post",url:a,data:{tableName:t}}).then((function(t){200===t.status&&("2.0"===e?(l.field2="",l.fieldOptions2=[],l.$nextTick((function(){l.fieldOptions2=t.data.data}))):(l.field1="",l.fieldOptions1=[],l.$nextTick((function(){l.fieldOptions1=t.data.data}))))})).catch((function(e){console.log(e)}))}},created:function(){this.getTableOptions("1.0"),this.getTableOptions("2.0")}}),s=i,r=(l("034f"),l("623f")),c=Object(r["a"])(s,n,o,!1,null,null,null),u=c.exports,d=l("82ae"),f=l.n(d),p=l("2ca7"),b=l.n(p);l("46c6");a["default"].config.productionTip=!1,a["default"].prototype.$axios=f.a,a["default"].use(b.a),new a["default"]({render:function(e){return e(u)}}).$mount("#app")},"6f44":function(e,t,l){}});